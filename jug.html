<!DOCTYPE html>
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Add jQuery -->

        <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
            <div class="container-fluid">
                <a class="navbar-brand" href="https://bit.ly/agri-link" style="padding:5px;border-radius: 5px;font-size: 20px;font-weight: bolder;">Agrilink-software</a>  
                <a class="navbar-brand" style="color:white" href="https://yajathome.github.io/Agri-link/farm.html">Farm manager</a>
                <a class="navbar-brand" style="color:white" href="https://yajathome.github.io/Agri-link/jug.html">Weather Forecaster</a>
                <a class="navbar-brand" style="color:white">Price observer</a>
                <a class="navbar-brand" style="color:white">Soil tester</a>  
                <a class="btn btn-danger">Sign out</a>
            </div>
        </nav>
        <h1 class="jormo">Weather Forecaster</h1>

    </head>
    <style>
        .navbar-brand:hover {
            padding-left:1px;
            animation-name: incr;
            animation-duration: 0.5s;
            animation-fill-mode: forwards;
            border-radius: 5px;
        }
        .no {
            background-color: #24ba4a;
            position: relative;
            z-index: 1;
        }
        .jormo {
            text-align:center;
            font-size: 50px;
            color:white;
            padding-top: 120px;
            padding-bottom: 50px;
        }
    </style>
    <body class="no"> 
        <video autoplay muted loop id="backgroundVideo" style="position: fixed;right: 0;bottom: 0;min-width: 100%;min-height: 100%;z-index: -1;object-fit: cover;">
            <source src="vid.mp4" type="video/mp4">
            Your browser does not support HTML5 video.
        </video>

        <div class="form-group" style="border-radius:20px;color:white;padding-left:200px;padding-right:200px;padding-top:100px">
            <label for="stateSelect" style="font-size:20px">Select state:</label>
            <select class="form-control" id="stateSelect">
                <option value="Andhra Pradesh">Andhra Pradesh</option>
                <option value="Karnataka">Karnataka</option>
                <option value="Kerala">Kerala</option>
                <option value="Tamil Nadu">Tamil Nadu</option>
            </select>

            <label for="terrainSelect" style="font-size:20px">Select Terrain:</label>
            <select class="form-control" id="terrainSelect">
                <option>Plain</option>
                <option>Plateau</option>
                <option>Mountain</option>
            </select>

            <label for="monthSelect" style="font-size:20px">Select Month:</label>
            <select class="form-control" id="monthSelect">
                <option>March</option>
                <option>April</option>
                <option>September</option>
                <option>October</option>
                <option>November</option>
                <option>December</option>
            </select>

            <button class="btn btn-primary mt-3" id="fetchWeatherBtn">Fetch Weather</button>
        </div>

        <div id="weatherData" style="color:white; padding: 20px;"></div> <!-- Div to display weather data -->

        <script>
            const apiKey = '84f67f62493040e1b98122132242908'; // Your API key

            // Mapping states to their corresponding latitude and longitude
            const stateCoordinates = {
                "Andhra Pradesh": { lat: 15.9129, lon: 79.7400 },
                "Karnataka": { lat: 15.3173, lon: 75.7139 },
                "Kerala": { lat: 10.8505, lon: 76.2711 },
                "Tamil Nadu": { lat: 11.1271, lon: 78.6569 }
            };

            function fetchWeatherData(state, terrain, month) {
                if (!stateCoordinates[state]) {
                    $('#weatherData').html('<p style="color: red;">Invalid state selected.</p>');
                    return;
                }

                const latitude = stateCoordinates[state].lat;
                const longitude = stateCoordinates[state].lon;

                const apiUrl = `https://api.weather.com/v3/wx/forecast/daily/5day?apiKey=${apiKey}&geocode=${latitude},${longitude}&format=json`;

                $.ajax({
                    url: apiUrl,
                    method: 'GET',
                    success: function(response) {
                        console.log(response); // Log response for debugging
                        $('#weatherData').html(`<p>Weather Data for ${state} (${terrain}, ${month}):</p><pre>${JSON.stringify(response, null, 2)}</pre>`);
                    },
                    error: function(error) {
                        console.error('Error fetching weather data:', error);
                        $('#weatherData').html('<p style="color: red;">Failed to fetch weather data. Please try again later.</p>');
                    }
                });
            }

            $(document).ready(function() {
                $('#fetchWeatherBtn').on('click', function() {
                    const state = $('#stateSelect').val();
                    const terrain = $('#terrainSelect').val();
                    const month = $('#monthSelect').val();

                    fetchWeatherData(state, terrain, month);
                });
            });
        </script>
    </body>
</html>
