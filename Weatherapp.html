<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop Recommendation Based on Weather and Terrain</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        select, button {
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
        }
        .result {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Crop Recommendation Based on Weather and Terrain</h1>
        <p>Enter the details below to get crop recommendations based on the weather and terrain conditions.</p>
        
        <div class="form-group">
            <label for="state">Select your state:</label>
            <select id="state">
                <option value="Andhra Pradesh">Andhra Pradesh</option>
                <option value="Tamil Nadu">Tamil Nadu</option>
                <option value="Kerala">Kerala</option>
                <option value="Karnataka">Karnataka</option>
            </select>
        </div>

        <div class="form-group">
            <label for="terrain">Select your terrain:</label>
            <select id="terrain">
                <option value="Plain">Plain</option>
                <option value="Plateau">Plateau</option>
                <option value="Mountain">Mountain</option>
            </select>
        </div>

        <div class="form-group">
            <label for="month">Select the month:</label>
            <select id="month">
                <option value="March">March</option>
                <option value="April">April</option>
                <option value="September">September</option>
                <option value="October">October</option>
                <option value="November">November</option>
                <option value="December">December</option>
            </select>
        </div>

        <button onclick="getRecommendation()">Get Recommendation</button>

        <div class="result">
            <h2>Weather Info:</h2>
            <p id="weather-info"></p>
            <h2>Crop Recommendation:</h2>
            <p id="crop-info"></p>
        </div>
    </div>

    <script>
        async function getRecommendation() {
            const state = document.getElementById('state').value;
            const terrain = document.getElementById('terrain').value.toLowerCase();
            const month = document.getElementById('month').value.toLowerCase();
            const apiKey = '668e6bc1ca05630197bdc4b801f6e883'; // Replace with your OpenWeatherMap API key
            
            // Map state to city
            const stateToCity = {
                "Andhra Pradesh": "Visakhapatnam",
                "Tamil Nadu": "Chennai",
                "Kerala": "Thiruvananthapuram",
                "Karnataka": "Bangalore",
            };
            const city = stateToCity[state];
        
            // Fetch weather data
            const weatherResponse = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=imperial`);
            if (!weatherResponse.ok) {
                document.getElementById('weather-info').textContent = 'Sorry, I couldn\'t get the weather information. Please try again later.';
                document.getElementById('crop-info').textContent = '';
                return;
            }
        
            const weatherData = await weatherResponse.json();
            const weatherDescription = weatherData.weather[0].description;
            const temperatureFahrenheit = weatherData.main.temp;
            const temperatureCelsius = Math.round((temperatureFahrenheit - 32) * 5 / 9);
        
            document.getElementById('weather-info').textContent = `The weather in ${city} is currently ${weatherDescription} with a temperature of ${temperatureCelsius}Â°C.`;
        
            // Determine crop recommendation
            let cropRecommendation = '';
            if (month === 'march' || month === 'april') {
                if (terrain === 'plain' || terrain === 'plateau') {
                    cropRecommendation = 'The conditions are suitable for planting zaid crops.';
                } else {
                    cropRecommendation = 'The conditions are not ideal for planting zaid crops in this terrain.';
                }
            } else if (month === 'october' || month === 'november') {
                if (terrain === 'plain' && temperatureCelsius > 25 && temperatureCelsius < 30) {
                    cropRecommendation = 'The conditions are suitable for successfully planting rabi crops.';
                } else if (terrain === 'plateau' && temperatureCelsius > 25 && temperatureCelsius < 30) {
                    cropRecommendation = 'You can plant rabi crops, but you should take extremely good care.';
                } else if (terrain === 'mountain' && temperatureCelsius > 25 && temperatureCelsius < 30) {
                    cropRecommendation = 'It is going to be very hard to farm.';
                } else {
                    cropRecommendation = 'The conditions are not suitable for planting rabi crops.';
                }
            } else if (month === 'september') {
                if (terrain === 'plain' && temperatureCelsius > 20 && temperatureCelsius < 25) {
                    cropRecommendation = 'The conditions are suitable for successfully planting kharif crops, and the plain terrain makes it easier.';
                } else if (terrain === 'plateau' && temperatureCelsius > 20 && temperatureCelsius < 25) {
                    cropRecommendation = 'You can plant kharif crops, but it would take effort.';
                } else if (terrain === 'mountain' && temperatureCelsius > 20 && temperatureCelsius < 25) {
                    cropRecommendation = 'The conditions are good for planting kharif crops, but it is going to be very hard to farm.';
                } else {
                    cropRecommendation = 'The conditions are not suitable for planting kharif crops.';
                }
            } else {
                cropRecommendation = 'The current month is not suitable for planting either rabi or kharif crops based on the given conditions.';
            }
        
            document.getElementById('crop-info').textContent = cropRecommendation;
        }
    </script>
</body>
</html>
